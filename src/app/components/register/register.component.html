<div class="login-wrapper" fxLayout="row" fxLayoutAlign="center center">
    <mat-card class="box">
      <mat-card-header>
        <mat-card-title>Register</mat-card-title>
      </mat-card-header>
  
      <form class="example-form"
      *ngIf="!isSuccessful"
      name="form"
      (ngSubmit)="f.form.valid && onSubmit()"
      #f="ngForm"
      novalidate
      >
        <mat-card-content>
          <div class="form-group">  
            <mat-form-field class="example-full-width">
              <input matInput placeholder="Username"
              type="text"
              class="form-control"
              name="userName"
              [(ngModel)]="form.userName"
              required
              minlength="3"
              maxlength="35"
              #userName="ngModel"
              >
              <div class="alert-danger" *ngIf="userName.errors && f.submitted">
                <div *ngIf="userName.errors['required']">Username is required</div>
                <div *ngIf="userName.errors['minlength']">
                  Username must be at least 3 characters
                </div>
                <div *ngIf="userName.errors['maxlength']">
                  Username must be at most 20 characters
                </div>
              </div>
            </mat-form-field>
          </div>  

          <div class="form-group">  
            <mat-form-field class="example-full-width">
              <input matInput placeholder="Age"
              type="number"
              class="form-control"
              name="age"
              [(ngModel)]="form.age"
              required
              min="18"
              max="99"
              #age="ngModel"
              >
              <div class="alert-danger" *ngIf="age.errors && f.submitted">
                <div *ngIf="age.errors['required']">Age is required</div>
                <div *ngIf="age.errors['max']">
                  Age cannot be greater than 99
                </div>
              </div>
            </mat-form-field>
          </div>  
  
          <div class="form-group">     
            <mat-form-field class="example-full-width">
              <input matInput placeholder="example@example.com"
              type="text"
              class="form-control"
              name="email" 
              required
              [(ngModel)]="form.email"
              #email="ngModel"
              >
              <mat-error *ngIf="email.invalid">{{getErrorMessage()}}</mat-error>
            </mat-form-field>
          </div>  
          
          <div class="form-group">
            <mat-form-field class="example-full-width">
              <mat-label>Enter your password</mat-label>
              <input matInput [type]="hide ? 'password' : 'text'"
              type="password"
              pattern="(?=.*\d)(?=.*[a-záéíóúüñ]).*[A-ZÁÉÍÓÚÜÑ].*"
              class="form-control"
              name="password"
              [(ngModel)]="form.password"
              required
              minlength="8"
              #password="ngModel"
              >
              <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                  <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field class="example-full-width">
              <mat-label>Choose a role...</mat-label>
              <mat-select 
              type="text"
              class="form-control"
              name="role"
              [(ngModel)]="form.role"
              required
              #role="ngModel"
              >
                <mat-option [value]="roles" *ngFor="let roles of Roles">{{roles}}
                </mat-option>
              </mat-select>
              <div class="alert-danger" *ngIf="role.errors && f.submitted">
                <div *ngIf="role.errors['required']">Role is required</div>
              </div>
            </mat-form-field>
          </div>         
        </mat-card-content>

        <div class="form-group">
          <button mat-stroked-button color="accent" class="btn-block">Register</button>
        </div>
        <div class="alert alert-warning" *ngIf="f.submitted && isSignUpFailed">
          Signup failed!<br />{{ errorMessage }}
        </div>  
  
      </form>
      <div class="alert alert-success" *ngIf="isSuccessful">
        Your registration is successful!
      </div>
    </mat-card>
  </div>
